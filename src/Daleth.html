<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Te Amo Daaaaa :3</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root {
  --bg:#bd95e5;
  --petal:#ffffff;
  --petal-shadow:rgba(0,0,0,0.06);
  --center:#ffd84d;
  --center-shadow:rgba(0,0,0,0.15);
  --text:#e90000;
}
* { box-sizing:border-box; margin:0; padding:0; }
html,body { width:100%; height:100%; overflow:hidden; font-family: 'Trebuchet MS', system-ui, sans-serif; }
body {
  background: radial-gradient(circle at 50% 40%, #f7edff 0%, var(--bg) 70%) fixed;
  position:relative;
  user-select:none;
  -webkit-font-smoothing:antialiased;
}

h1 {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size: clamp(2.5rem, 12vw, 8rem);
  color:var(--text);
  text-align:center;
  text-shadow:0 0 6px rgba(255,255,255,0.9), 0 0 18px rgba(122,59,170,0.35);
  animation:pulse 2.4s ease-in-out infinite;
  font-weight:700;
  letter-spacing:.05em;
}

/* BotÃ³n de mÃºsica */
.music-btn {
  position:fixed;
  right:1rem;
  bottom:1rem;
  background:rgba(255,255,255,0.75);
  backdrop-filter:blur(6px);
  -webkit-backdrop-filter:blur(6px);
  border:2px solid rgba(255,255,255,0.9);
  color:#6d279e;
  font-weight:600;
  font-size:.9rem;
  padding:.65rem 1rem;
  border-radius:999px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:.5rem;
  box-shadow:0 4px 14px -4px rgba(0,0,0,0.25);
  transition:background .35s, transform .25s;
  z-index:50;
}
.music-btn:hover { background:rgba(255,255,255,0.95); }
.music-btn:active { transform:scale(.93); }
.music-btn .icon { font-size:1.1rem; line-height:1; }

.music-btn.playing { color:#d22b6c; }
.music-btn.playing .icon { animation: spin 4s linear infinite; }

@keyframes spin { to { transform:rotate(360deg); } }

@keyframes pulse {
  0%,100% { transform:translate(-50%,-50%) scale(0.85); }
  50% { transform:translate(-50%,-50%) scale(1.05); }
}

.daisy {
  position:absolute;
  width:var(--size);
  height:var(--size);
  pointer-events:none;
  animation: float var(--floatDur) linear infinite, sway calc(var(--floatDur)*0.6) ease-in-out infinite;
  will-change: transform;
  opacity:0;
  animation-delay: var(--delay);
}

@keyframes float {
  0% { transform:translateY(0) rotate(0deg); opacity:0; }
  5% { opacity:1; }
  95% { opacity:1; }
  100% { transform:translateY(-120vh) rotate(var(--rot)); opacity:0; }
}

@keyframes sway {
  0%,100% { margin-left: -8px; }
  50% { margin-left: 8px; }
}

.daisy svg {
  width:100%;
  height:100%;
  overflow:visible;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.15));
}

.glow {
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 30% 70%, rgba(255,255,255,0.45), transparent 60%),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,0.4), transparent 65%),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.35), transparent 70%);
  mix-blend-mode:overlay;
  opacity:.4;
  pointer-events:none;
}

@media (prefers-reduced-motion: reduce) {
  .daisy, h1 { animation:none !important; }
}
</style>
</head>
<body>
  <h1>Te Amo!!!<br>Daaaaa :3</h1>
  <div class="glow"></div>
  <audio id="bgm" loop preload="auto">
    <source src="QMFT.mp3" type="audio/mpeg" />
  </audio>
  <button id="musicToggle" class="music-btn" aria-pressed="false" aria-label="Activar mÃºsica">
    <span class="icon">ðŸŽµ</span>
    <span class="label">Sonido</span>
  </button>

<script>
const TOTAL = 70;            
const MIN_SIZE = 40;        
const MAX_SIZE = 140;        
const MIN_DUR = 18;          
const MAX_DUR = 42;    

function createDaisy() {
  const div = document.createElement('div');
  div.className = 'daisy';
  const size = rand(MIN_SIZE, MAX_SIZE);
  const floatDur = rand(MIN_DUR, MAX_DUR);
  const startX = rand(0, 100);
  const delay = -rand(0, floatDur);
  const rot = rand(-540, 540) + 'deg';
  div.style.setProperty('--size', size + 'px');
  div.style.setProperty('--floatDur', floatDur + 's');
  div.style.setProperty('--delay', delay + 's');
  div.style.setProperty('--rot', rot);
  div.style.left = startX + 'vw';
  div.style.bottom = '-'+ rand(0, 60) + 'vh';

  const petalTint = rand(240, 255);
  const centerTint = rand(225, 255);

  div.innerHTML = `
    <svg viewBox="-50 -50 100 100" aria-hidden="true">
      <g transform="rotate(${rand(0,360)})">
        ${Array.from({length:16}).map((_,i)=>{
          const angle = (360/16)*i;
          const petalLen = rand(30,38);
          const petalWidth = rand(12,16);
          return `<ellipse cx="0" cy="-${petalLen/2}" rx="${petalWidth/2}" ry="${petalLen/1.4}" fill="rgba(${petalTint},${petalTint},${petalTint},0.98)" stroke="rgba(0,0,0,0.04)" stroke-width="1" transform="rotate(${angle})" />`
        }).join('')}
        <circle r="18" fill="rgb(255,${centerTint},80)" stroke="var(--center-shadow)" stroke-width="3"></circle>
        <circle r="10" fill="rgba(255,255,255,0.25)"></circle>
      </g>
    </svg>
  `;
  return div;
}

function rand(a,b){ return Math.random()*(b-a)+a; }

for(let i=0;i<TOTAL;i++){
  document.body.appendChild(createDaisy());
}

let resizeTimer;
window.addEventListener('resize', ()=>{
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(()=>{
    document.querySelectorAll('.daisy').forEach(d=>{
      d.style.left = rand(0,100)+'vw';
    });
  }, 400);
});

const audio = document.getElementById('bgm');
const btn = document.getElementById('musicToggle');
let userInteracted = false;

function updateBtn(){
  const playing = !audio.paused;
  btn.classList.toggle('playing', playing);
  btn.setAttribute('aria-pressed', playing ? 'true':'false');
  btn.querySelector('.label').textContent = playing ? 'Pausar' : 'Sonido';
  btn.querySelector('.icon').textContent = playing ? 'ðŸ’–' : 'ðŸŽµ';
}

async function toggleAudio(){
  try {
    if(audio.paused){
      await audio.play();
    } else {
      audio.pause();
    }
  } catch(e){
    console.warn('No se pudo reproducir todavÃ­a:', e);
  }
  updateBtn();
}

btn.addEventListener('click', ()=>{
  userInteracted = true;
  toggleAudio();
});


['pointerdown','keydown'].forEach(ev=>{
  window.addEventListener(ev, attemptAutoplayOnce, { once:true });
});

function attemptAutoplayOnce(){
  if(userInteracted) return;
  audio.volume = 0;
  audio.play().then(()=>{
    let vol = 0;
    const step = ()=>{
      vol += 0.02;
      audio.volume = Math.min(vol, 1);
      if(vol < 1) requestAnimationFrame(step);
    };
    requestAnimationFrame(step);
    updateBtn();
  }).catch(()=>{/* ignorar */});
}

updateBtn();
</script>
</body>
</html>